<!-- templates/navbar.html -->
<div x-data="{ open: false }" class="relative h-full">
  <!-- Toggle button (only visible on small screens) -->
  <button @click="open = !open" class="md:hidden p-3">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
    </svg>
  </button>

  <!-- Sidebar -->
  <aside
    class="fixed inset-y-0 left-0 w-64 bg-gray-100 border-r text-gray-900 text-base font-medium transform transition-transform duration-300 ease-in-out
           z-50 md:static md:translate-x-0"
    :class="{ '-translate-x-full': !open, 'translate-x-0': open }"
  >
    <div class="p-4 text-2xl font-bold mb-6">SecureAI</div>

    <nav class="space-y-2 px-4">
      <!-- Home, Upload, etc. -->
      <a href="/" @click="open = false" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-200 transition-all {% if active_page == 'home' %}bg-gray-200{% endif %}">
        <i data-lucide="home" class="w-5 h-5 text-gray-600"></i>
        <span>Home</span>
      </a>
      <a href="/upload" @click="open = false" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-200 transition-all {% if active_page == 'upload' %}bg-gray-200{% endif %}">
        <i data-lucide="upload" class="w-5 h-5 text-gray-600"></i>
        <span>Upload Manager</span>
      </a>
      <a href="/stats" @click="open = false" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-200 transition-all {% if active_page == 'stats' %}bg-gray-200{% endif %}">
        <i data-lucide="bar-chart" class="w-5 h-5 text-gray-600"></i>
        <span>Statistics</span>
      </a>
      <a href="/settings" @click="open = false" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-200 transition-all {% if active_page == 'settings' %}bg-gray-200{% endif %}">
        <i data-lucide="settings" class="w-5 h-5 text-gray-600"></i>
        <span>Settings</span>
      </a>
      <a href="/image" @click="open = false" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-200 transition-all {% if active_page == 'image' %}bg-gray-200{% endif %}">
        <i data-lucide="image" class="w-5 h-5 text-gray-600"></i>
        <span>Image Analysis</span>
      </a>
    
      <!-- ðŸ”¹ Projects Section -->
<div class="flex items-center justify-between px-3 py-2 text-gray-700 font-medium hover:bg-gray-200 rounded-lg transition-all group">
  <div class="flex items-center gap-3">
    <i data-lucide="folder" class="w-5 h-5 text-gray-600 group-hover:text-gray-800"></i>
    <span>Projects</span>
  </div>
  <button class="text-gray-500 hover:text-gray-800" title="Create New Project" @click="$dispatch('open-project-modal')">
    <i data-lucide="plus" class="w-4 h-4"></i>
  </button>
</div>

      <div id="project-list" class="space-y-1 ps-6">
        <!-- Dynamic project links will be inserted here -->
      </div>
    </nav>
    
  </aside>
</div>

<script>
  document.addEventListener("alpine:init", () => {
    if (window.lucide) {
      lucide.createIcons();
    }
  });
</script>
